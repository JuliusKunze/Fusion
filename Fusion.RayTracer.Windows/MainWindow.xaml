<r:RibbonWindow x:Class="MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:own="clr-namespace:Fusion.RayTracer.Windows"
    xmlns:r="clr-namespace:Microsoft.Windows.Controls.Ribbon;assembly=RibbonControlsLibrary"
    Title="Fusion Ray Tracer" Height="700" Width="525">
    <Window.TaskbarItemInfo>
        <TaskbarItemInfo></TaskbarItemInfo>
    </Window.TaskbarItemInfo>

    <Grid>    
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"></RowDefinition>
            <RowDefinition></RowDefinition>
        </Grid.RowDefinitions>
        
        <r:Ribbon Grid.Row="0">
            
        </r:Ribbon>
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition Width="Auto"></ColumnDefinition>
            </Grid.ColumnDefinitions>
            <TabControl>
                <TabItem Header="Scene description" >
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"></RowDefinition>
                            <RowDefinition></RowDefinition>
                            <RowDefinition Height="Auto"></RowDefinition>
                            <RowDefinition Height="120"></RowDefinition>
                        </Grid.RowDefinitions>
                        
                        <StackPanel>
                            <Button Name="_CompileSceneButton">Compile scene</Button>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"></ColumnDefinition>
                                    <ColumnDefinition Width="*"></ColumnDefinition>
                                </Grid.ColumnDefinitions>
                            </Grid>
                        </StackPanel>
                        <RichTextBox FontFamily="Consolas" Grid.Row="1" Margin="0" AcceptsReturn="True" Name="_SceneDescriptionTextBox" Background="#FFFFFF">
                            <RichTextBox.LayoutTransform>
                                <ScaleTransform ScaleX="5" ScaleY="5"/>
                            </RichTextBox.LayoutTransform>
                            <RichTextBox.Resources>
                                    <Style TargetType="{x:Type Paragraph}">
                                        <Setter Property="Margin" Value="0"/>
                                    </Style>
                                </RichTextBox.Resources>
                                <FlowDocument PageWidth="10000">
                                    
                                </FlowDocument>
                            </RichTextBox>
                        <Popup Name="_AutoCompletitionPopup" AllowsTransparency="True" Placement="Bottom" IsOpen="False">
                            <ListBox Name="_AutoCompletitionListBox" VerticalContentAlignment="Stretch" HorizontalContentAlignment="Stretch" KeyboardNavigation.DirectionalNavigation="Contained"></ListBox>
                        </Popup>

                        <GridSplitter HorizontalAlignment="Stretch" Grid.Row="2" Grid.ColumnSpan="1" Height="3"></GridSplitter>
                        
                        <Grid Grid.Row="3">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"></RowDefinition>
                                <RowDefinition></RowDefinition>
                            </Grid.RowDefinitions>

                            <Label Grid.Row="0">Error:</Label>

                            <ScrollViewer VerticalScrollBarVisibility="Auto" Grid.Row="1">
                                <TextBox Name="_ErrorTextBox" IsReadOnly="True"></TextBox>
                            </ScrollViewer>
                        </Grid>
                    </Grid>
                </TabItem>
                <TabItem Header="Rendering" IsEnabled="True" Name="_RenderingTabItem" Visibility="Collapsed">
                    
                    <StackPanel>
                        <GroupBox Header="Time calculation" Name="_RenderingTimeCalculationGroupBox">
                            <StackPanel>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition></ColumnDefinition>
                                        <ColumnDefinition></ColumnDefinition>
                                    </Grid.ColumnDefinitions>

                                    <Button Name="_CalculateNeededTimeButton">Calculate rendering time</Button>
                                    <Button Name="_CalculateNeededTimeOptionsButton" Grid.Column="1">Options...</Button>
                                </Grid>

                                <Label Name="_TotalNeededTimeLabel">(Needed total time:)</Label>
                                <Label Name="_AverageNeededTimePerPixelLabel">(Needed time per pixel average:)</Label>
                            </StackPanel>
                        </GroupBox>
                        
                        <Button Name="_RenderButton">Render</Button>
                        <Button Name="_RenderCancelButton" Visibility="Collapsed">Cancel</Button>
                        <ProgressBar Name="_RenderProgressBar" Height="25" Maximum="100" Visibility="Collapsed"></ProgressBar>
                        <Label Name="_TotalElapsedTimeLabel">(Elapsed total time:)</Label>
                        <Label Name="_AverageElapsedTimePerPixelLabel">(Elapsed time per pixel average:)</Label>
                    </StackPanel>
                </TabItem>
                <TabItem Header="Result image" Visibility="Collapsed" Name="_ResultTabItem">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"></RowDefinition>
                            <RowDefinition Height="*"></RowDefinition>
                        </Grid.RowDefinitions>
                        <Button Name="_SaveButton">Save...</Button>
                        <Image Grid.Row="1" Name="_ResultImage" Stretch="None" SnapsToDevicePixels="True" RenderOptions.BitmapScalingMode="NearestNeighbor"></Image>
                    </Grid>
                </TabItem>
            </TabControl>
           
        </Grid>
    </Grid>
</r:RibbonWindow>
